
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://cluster.dev/aws-cloud-provider/">
      
      <link rel="icon" href="../images/favicon.png">
      <meta name="generator" content="mkdocs-1.2, mkdocs-material-7.1.7">
    
    
      
        <title>Deploying to AWS - Cluster.dev</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.f1a3b89f.min.css">
        
          
          
          <meta name="theme-color" content="#4051b5">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-157259461-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deploying-to-aws" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Cluster.dev" class="md-header__button md-logo" aria-label="Cluster.dev" data-md-component="logo">
      
  <img src="/images/cluster-dev-logo-small-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cluster.dev
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deploying to AWS
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/shalb/cluster.dev/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    shalb/cluster.dev
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../prerequisites/" class="md-tabs__link md-tabs__link--active">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../template-development/" class="md-tabs__link">
      Template Development
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../project-configuration/" class="md-tabs__link">
        Reference
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Cluster.dev" class="md-nav__button md-logo" aria-label="Cluster.dev" data-md-component="logo">
      
  <img src="/images/cluster-dev-logo-small-white.png" alt="logo">

    </a>
    Cluster.dev
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/shalb/cluster.dev/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    shalb/cluster.dev
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        Home
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Welcome
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../documentation-structure/" class="md-nav__link">
        Documentation Structure
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        Getting Started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../prerequisites/" class="md-nav__link">
        cdev Prerequisites
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        cdev Install
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Deploying to AWS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Deploying to AWS
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites-to-use-aws-eks-template" class="md-nav__link">
    Prerequisites to use AWS-EKS template
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites to use AWS-EKS template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-aws-client-and-check-access" class="md-nav__link">
    Install AWS client and check access
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-s3-bucket-for-states" class="md-nav__link">
    Create S3 bucket for states
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-zone" class="md-nav__link">
    DNS Zone
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aws-eks" class="md-nav__link">
    AWS-EKS
  </a>
  
    <nav class="md-nav" aria-label="AWS-EKS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aws-eks-starting-guide" class="md-nav__link">
    AWS-EKS starting guide
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources-to-be-created" class="md-nav__link">
    Resources to be created
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../digital-ocean-cloud-provider/" class="md-nav__link">
        Deploying to DigitalOcean
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../google-cloud-provider/" class="md-nav__link">
        Deploying to GCE
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../azure-cloud-provider/" class="md-nav__link">
        Deploying to Azure
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cdev-installation-reference/" class="md-nav__link">
        cdev Install Reference
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../template-development/" class="md-nav__link">
        Template Development
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../project-configuration/" class="md-nav__link">
        Project Configuration
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      <label class="md-nav__link" for="__nav_4_2">
        CLI Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="CLI Reference" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          CLI Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cli-commands/" class="md-nav__link">
        CLI Commands
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cli-options/" class="md-nav__link">
        CLI Options
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites-to-use-aws-eks-template" class="md-nav__link">
    Prerequisites to use AWS-EKS template
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites to use AWS-EKS template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-aws-client-and-check-access" class="md-nav__link">
    Install AWS client and check access
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-s3-bucket-for-states" class="md-nav__link">
    Create S3 bucket for states
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-zone" class="md-nav__link">
    DNS Zone
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aws-eks" class="md-nav__link">
    AWS-EKS
  </a>
  
    <nav class="md-nav" aria-label="AWS-EKS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aws-eks-starting-guide" class="md-nav__link">
    AWS-EKS starting guide
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources-to-be-created" class="md-nav__link">
    Resources to be created
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/shalb/cluster.dev/edit/master/docs/aws-cloud-provider.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="deploying-to-aws">Deploying to AWS<a class="headerlink" href="#deploying-to-aws" title="Permanent link"> ¶</a></h1>
<p>cdev uses project templates to generate projects in a desired cloud. This section describes steps necessary to start working with cdev in AWS cloud using <a href="https://github.com/shalb/cdev-aws-eks">AWS-EKS</a> template.</p>
<h2 id="prerequisites-to-use-aws-eks-template">Prerequisites to use AWS-EKS template<a class="headerlink" href="#prerequisites-to-use-aws-eks-template" title="Permanent link"> ¶</a></h2>
<ol>
<li>
<p>Terraform version 13+.</p>
</li>
<li>
<p>AWS account.</p>
</li>
<li>
<p><a href="#install-aws-client-and-check-access">AWS CLI</a> installed.</p>
</li>
<li>
<p>kubectl installed.</p>
</li>
<li>
<p><a href="https://cluster.dev/installation/">cdev installed</a>.</p>
</li>
</ol>
<h3 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permanent link"> ¶</a></h3>
<p>cdev requires cloud credentials to manage and provision resources. You can configure access to AWS in two ways:</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Please note that you have to use IAM user with granted administrative permissions.</p>
</div>
<ul>
<li>
<p><strong>Environment variables</strong>: provide your credentials via the <code>AWS_ACCESS_KEY_ID</code> and <code>AWS_SECRET_ACCESS_KEY</code>, the environment variables that represent your AWS Access Key and AWS Secret Key. You can also use the <code>AWS_DEFAULT_REGION</code> or <code>AWS_REGION</code> environment variable to set region, if needed. Example usage:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">=</span><span class="s2">&quot;MYACCESSKEY&quot;</span>
<span class="nb">export</span> <span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">=</span><span class="s2">&quot;MYSECRETKEY&quot;</span>
<span class="nb">export</span> <span class="nv">AWS_DEFAULT_REGION</span><span class="o">=</span><span class="s2">&quot;eu-central-1&quot;</span>
</code></pre></div>
</li>
<li>
<p><strong>Shared Credentials File (recommended)</strong>: set up an <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html">AWS configuration file</a> to specify your credentials.</p>
<p>Credentials file <code>~/.aws/credentials</code> example:</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>cluster-dev<span class="o">]</span>
<span class="nv">aws_access_key_id</span> <span class="o">=</span> MYACCESSKEY
<span class="nv">aws_secret_access_key</span> <span class="o">=</span> MYSECRETKEY
</code></pre></div>
<p>Config: <code>~/.aws/config</code> example:</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>profile cluster-dev<span class="o">]</span>
<span class="nv">region</span> <span class="o">=</span> eu-central-1
</code></pre></div>
<p>Then export <code>AWS_PROFILE</code> environment variable.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">AWS_PROFILE</span><span class="o">=</span>cluster-dev
</code></pre></div>
</li>
</ul>
<h3 id="install-aws-client-and-check-access">Install AWS client and check access<a class="headerlink" href="#install-aws-client-and-check-access" title="Permanent link"> ¶</a></h3>
<p>If you do not have the AWS CLI installed, refer to AWS CLI <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-linux.html">official installation guide</a>, or use commands from the example:</p>
<div class="highlight"><pre><span></span><code>curl <span class="s2">&quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot;</span> -o <span class="s2">&quot;awscliv2.zip&quot;</span>
unzip awscliv2.zip
sudo ./aws/install
aws s3 ls
</code></pre></div>
<h3 id="create-s3-bucket-for-states">Create S3 bucket for states<a class="headerlink" href="#create-s3-bucket-for-states" title="Permanent link"> ¶</a></h3>
<p>cdev uses S3 bucket for storing states. Create the bucket with the command:</p>
<div class="highlight"><pre><span></span><code>aws s3 mb s3://cdev-states
</code></pre></div>
<h3 id="dns-zone">DNS Zone<a class="headerlink" href="#dns-zone" title="Permanent link"> ¶</a></h3>
<p>For the AWS-EKS template example, you need to define a Route 53 hosted zone. Options:</p>
<ol>
<li>
<p>You already have a Route 53 hosted zone.</p>
</li>
<li>
<p>Create a new hosted zone using a <a href="https://docs.aws.amazon.com/cli/latest/reference/route53/create-hosted-zone.html#examples">Route 53 documentation example</a>.</p>
</li>
<li>
<p>Use "cluster.dev" domain for zone delegation.</p>
</li>
</ol>
<h2 id="aws-eks">AWS-EKS<a class="headerlink" href="#aws-eks" title="Permanent link"> ¶</a></h2>
<p><a href="https://github.com/shalb/cdev-aws-eks">AWS-EKS</a> is a cdev template that creates and provisions Kubernetes clusters in AWS cloud by means of Amazon Elastic Kubernetes Service (EKS).</p>
<h3 id="aws-eks-starting-guide">AWS-EKS starting guide<a class="headerlink" href="#aws-eks-starting-guide" title="Permanent link"> ¶</a></h3>
<ol>
<li>
<p>Configure <a href="#authentication">access to AWS</a> and export required variables.</p>
</li>
<li>
<p>Create locally a project directory, cd into it and execute the command:</p>
<div class="highlight"><pre><span></span><code>  cdev project create https://github.com/shalb/cdev-aws-eks
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The template's repo could contain several options for project generation. To list available generators, use <code>--list-templates</code> option:</p>
<div class="highlight"><pre><span></span><code>cdev project create https://github.com/shalb/cdev-aws-eks --list-templates
</code></pre></div>
<p>Then you can specify which generator to use, for example:</p>
<div class="highlight"><pre><span></span><code>cdev project create https://github.com/shalb/cdev-aws-eks minimal
</code></pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you leave it unspecified, cdev will generate a default project for you. You can also opt for an  interactive mode with the extended menu:</p>
<div class="highlight"><pre><span></span><code>cdev project create https://github.com/shalb/cdev-aws-eks --interactive
</code></pre></div>
</div>
</li>
<li>
<p>Edit variables in the example's files, if necessary:</p>
<ul>
<li>
<p>project.yaml - main project config. Sets common global variables for current project such as organization, region, state bucket name etc. See <a href="https://cluster.dev/project-configuration/#project">project configuration docs</a>.</p>
</li>
<li>
<p>backend.yaml - configures backend for cdev states (including Terraform states). Uses variables from project.yaml. See <a href="https://cluster.dev/project-configuration/#backends">backend docs</a>.</p>
</li>
<li>
<p>infra.yaml - describes infrastructure configuration. See <a href="https://cluster.dev/project-configuration/#infrastructure">infrastructure docs</a>.</p>
</li>
</ul>
</li>
<li>
<p>Run <code>cdev plan</code> to build the project. In the output you will see an infrastructure that is going to be created after running <code>cdev apply</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to running <code>cdev apply</code> make sure to look through the infra.yaml file and replace the commented fields with real values. In case you would like to use existing VPC and subnets, uncomment preset options and set correct VPC ID and subnets' IDs. If you leave them as is, cdev will have VPC and subnets created for you.</p>
</div>
</li>
<li>
<p>Run <code>cdev apply</code></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We highly recommend to run <code>cdev apply</code> in a debug mode so that you could see cdev logging in the output: <code>cdev apply -l debug</code></p>
</div>
</li>
<li>
<p>After <code>cdev apply</code> is successfully executed, in the output you will see the ArgoCD URL of your cluster. Sign in to the console to check whether ArgoCD is up and running and the template has been deployed correctly. To sign in, use the "admin" login and the bcrypted password that you have generated for the infra.yaml.</p>
</li>
<li>
<p>Displayed in the output will be also a command on how to get kubeconfig and connect to your Kubernetes cluster.</p>
</li>
<li>
<p>Destroy the cluster and all created resources with the command <code>cdev destroy</code></p>
</li>
</ol>
<h3 id="resources-to-be-created">Resources to be created<a class="headerlink" href="#resources-to-be-created" title="Permanent link"> ¶</a></h3>
<ul>
<li>
<p><em>(optional, if you use cluster.dev domain)</em> Route53 zone <strong><cluster-name>.cluster.dev</strong></p>
</li>
<li>
<p><em>(optional, if vpc_id is not set)</em> VPC for EKS cluster</p>
</li>
<li>
<p>EKS Kubernetes cluster with addons:</p>
<ul>
<li>
<p>cert-manager</p>
</li>
<li>
<p>ingress-nginx</p>
</li>
<li>
<p>external-dns</p>
</li>
<li>
<p>argocd</p>
</li>
</ul>
</li>
<li>
<p>AWS IAM roles for EKS IRSA cert-manager and external-dns</p>
</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../installation/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              cdev Install
            </div>
          </div>
        </a>
      
      
        <a href="../digital-ocean-cloud-provider/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Deploying to DigitalOcean
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Project is maintained by
        <a href="https://www.shalb.com/" target="_blank" rel="noopener">
          SHALB
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://join.slack.com/t/cluster-dev/shared_invite/zt-eg4q6jae-v0~zgrBLYTTXt~CjnjmprA" target="_blank" rel="noopener" title="join.slack.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/shalbcom" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://github.com/shalb/cluster.dev" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.b0710199.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.76f349be.min.js"></script>
      
    
  </body>
</html>