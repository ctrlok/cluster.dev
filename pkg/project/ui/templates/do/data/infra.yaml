name: do-backend
kind: backend
provider: do
spec:
  bucket: {{ .project.variables.state_bucket_name }}
  region: {{ .project.variables.region }}
  access_key: {{ env "SPACES_ACCESS_KEY_ID" }}
  secret_key: {{ env "SPACES_SECRET_ACCESS_KEY" }}
---
name: k8s-cdev
template: "template/do-k8s.yaml"
kind: infrastructure
backend: do-backend
variables:
  bucket: {{ .project.variables.state_bucket_name }}
  region: {{ .project.variables.region }}
  vpc: default
  provider:
    region: {{ .project.variables.region }}
  main_node_group:
    name: "default-ng"
    min_nodes: 1
    max_nodes: 3
    auto_scale: true
    node_type: "s-1vcpu-2gb"
  k8s_version: "1.19"
  domain: do.horoshop.ua
  password: MyPassword # See 'cdev secret create --help' for use secrets here.
