
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://cluster.dev/project-configuration/">
      
      <link rel="icon" href="../images/favicon.png">
      <meta name="generator" content="mkdocs-1.2, mkdocs-material-7.1.7">
    
    
      
        <title>Project Configuration - Cluster.dev</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.f1a3b89f.min.css">
        
          
          
          <meta name="theme-color" content="#4051b5">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-157259461-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#project-configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Cluster.dev" class="md-header__button md-logo" aria-label="Cluster.dev" data-md-component="logo">
      
  <img src="/images/cluster-dev-logo-small-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cluster.dev
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Project Configuration
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/shalb/cluster.dev/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    shalb/cluster.dev
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../prerequisites/" class="md-tabs__link">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../template-development/" class="md-tabs__link">
      Template Development
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="./" class="md-tabs__link md-tabs__link--active">
        Reference
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Cluster.dev" class="md-nav__button md-logo" aria-label="Cluster.dev" data-md-component="logo">
      
  <img src="/images/cluster-dev-logo-small-white.png" alt="logo">

    </a>
    Cluster.dev
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/shalb/cluster.dev/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    shalb/cluster.dev
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        Home
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Welcome
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../documentation-structure/" class="md-nav__link">
        Documentation Structure
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Getting Started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../prerequisites/" class="md-nav__link">
        cdev Prerequisites
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        cdev Install
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../aws-cloud-provider/" class="md-nav__link">
        Deploying to AWS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../digital-ocean-cloud-provider/" class="md-nav__link">
        Deploying to DigitalOcean
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../google-cloud-provider/" class="md-nav__link">
        Deploying to GCE
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../azure-cloud-provider/" class="md-nav__link">
        Deploying to Azure
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cdev-installation-reference/" class="md-nav__link">
        cdev Install Reference
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../template-development/" class="md-nav__link">
        Template Development
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      <label class="md-nav__link" for="__nav_4">
        Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Project Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Project Configuration
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#project" class="md-nav__link">
    Project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infrastructure" class="md-nav__link">
    Infrastructure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backends" class="md-nav__link">
    Backends
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#secrets" class="md-nav__link">
    Secrets
  </a>
  
    <nav class="md-nav" aria-label="Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sops-secrets" class="md-nav__link">
    SOPS secrets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amazon-secret-manager" class="md-nav__link">
    Amazon secret manager
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#templates" class="md-nav__link">
    Templates
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      <label class="md-nav__link" for="__nav_4_2">
        CLI Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="CLI Reference" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          CLI Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cli-commands/" class="md-nav__link">
        CLI Commands
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cli-options/" class="md-nav__link">
        CLI Options
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#project" class="md-nav__link">
    Project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infrastructure" class="md-nav__link">
    Infrastructure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backends" class="md-nav__link">
    Backends
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#secrets" class="md-nav__link">
    Secrets
  </a>
  
    <nav class="md-nav" aria-label="Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sops-secrets" class="md-nav__link">
    SOPS secrets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amazon-secret-manager" class="md-nav__link">
    Amazon secret manager
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#templates" class="md-nav__link">
    Templates
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/shalb/cluster.dev/edit/master/docs/project-configuration.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="project-configuration">Project Configuration<a class="headerlink" href="#project-configuration" title="Permanent link"> ¶</a></h1>
<p>Common project files:</p>
<div class="highlight"><pre><span></span><code>project.yaml        <span class="c1"># Contains global project variables that can be used in other configuration objects.</span>
&lt;infra_name&gt;.yaml   <span class="c1"># Contains reference to a template, variables to render a template and backend for states.</span>
&lt;backend_name&gt;.yaml <span class="c1"># Describes a backend storage for Terraform and cdev states.</span>
&lt;secret_name&gt;.yaml  <span class="c1"># Contains secrets, one per file.</span>
</code></pre></div>
<p><code>cdev</code> reads configuration from current directory, i.e. all files by mask: <code>*.yaml</code>. It is allowed to place several yaml configuration objects in one file, separating them with "---". The exception is the project.yaml configuration file and files with secrets.</p>
<p>Project represents a single scope for infrastructures within which they are stored and reconciled. The dependencies between different infrastructures can be used within the project scope. Project can host global variables that can be used to template target infrastructure.</p>
<h2 id="project">Project<a class="headerlink" href="#project" title="Permanent link"> ¶</a></h2>
<p>File: <code>project.yaml</code>. <em>Required</em>.
Contains global project variables that can be used in other configuration objects, such as backend or infrastructure (except of <code>secrets</code>). Note that the <code>project.conf</code> file is not rendered with the template and you cannot use template units in it.</p>
<p>Example <code>project.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my_project</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">project</span>
<span class="nt">variables</span><span class="p">:</span>
  <span class="nt">organization</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">shalb</span>
  <span class="nt">region</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">eu-central-1</span>
  <span class="nt">state_bucket_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cdev-states</span>
</code></pre></div>
<ul>
<li>
<p><code>name</code>: project name. <em>Required</em>.</p>
</li>
<li>
<p><code>kind</code>: object kind. Must be <code>project</code>. <em>Required</em>.</p>
</li>
<li>
<p><code>variables</code>: a set of data in yaml format that can be referenced in other configuration objects. For the example above, the link to the organization name will look like this: <code>{{ .project.variables.organization }}</code>.</p>
</li>
</ul>
<h2 id="infrastructure">Infrastructure<a class="headerlink" href="#infrastructure" title="Permanent link"> ¶</a></h2>
<p>File: searching in <code>./*.yaml</code>. <em>Required at least one</em>.
Infrastructure object (<code>kind: infrastructure</code>) contains reference to a template, variables to render the template and backend for states.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Define infrastructure itself</span>
<span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">k3s-infra</span>
<span class="nt">template</span><span class="p">:</span> <span class="s">&quot;./templates/&quot;</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">infrastructure</span>
<span class="nt">backend</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">aws-backend</span>
<span class="nt">variables</span><span class="p">:</span>
  <span class="nt">bucket</span><span class="p">:</span> <span class="p p-Indicator">{{</span> <span class="nv">.project.variables.state_bucket_name</span> <span class="p p-Indicator">}}</span> <span class="c1"># Using project variables.</span>
  <span class="nt">region</span><span class="p">:</span> <span class="p p-Indicator">{{</span> <span class="nv">.project.variables.region</span> <span class="p p-Indicator">}}</span>
  <span class="nt">organization</span><span class="p">:</span> <span class="p p-Indicator">{{</span> <span class="nv">.project.variables.organization</span> <span class="p p-Indicator">}}</span>
  <span class="nt">domain</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cluster.dev</span>
  <span class="nt">instance_type</span><span class="p">:</span> <span class="s">&quot;t3.medium&quot;</span>
  <span class="nt">vpc_id</span><span class="p">:</span> <span class="s">&quot;vpc-5ecf1234&quot;</span>
</code></pre></div>
<ul>
<li>
<p><code>name</code>: infrastructure name. <em>Required</em>.</p>
</li>
<li>
<p><code>kind</code>: object kind. <code>infrastructure</code>. <em>Required</em>.</p>
</li>
<li>
<p><code>backend</code>: name of the backend that will be used to store the states of this infrastructure. <em>Required</em>.</p>
</li>
<li>
<p><code>variables</code>: data set for template rendering.</p>
</li>
<li>
<p><a name="infra_options_template"><code>template</code></a>: it's either a path to a local directory containing the template's configuration files, or a remote Git repository as a template source. For more details on templates please see the <a href="https://cluster.dev/template-development/">Template Development</a> section. A local path must begin with either <code>/</code> for absolute path, <code>./</code> or <code>../</code> for relative path. For Git source, use this format: <code>&lt;GIT_URL&gt;//&lt;PATH_TO_TEMPLATE_DIR&gt;?ref=&lt;BRANCH_OR_TAG&gt;</code>:</p>
<ul>
<li><code>&lt;GIT_URL&gt;</code> - <em>required</em>. Standard Git repo url. See details on <a href="https://git-scm.com/docs/git-clone#_git_urls">official Git page</a>.</li>
<li><code>&lt;PATH_TO_TEMPLATE_DIR&gt;</code> - <em>optional</em>, use it if template configuration is not in root of repo.</li>
<li><code>&lt;BRANCH_OR_TAG&gt;</code>- Git branch or tag.</li>
</ul>
</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><span class="nt">template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/dir</span> <span class="c1"># absolute local path</span>
<span class="nt">template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./template/</span> <span class="c1"># relative local path</span>
<span class="nt">template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">../../template/</span> <span class="c1"># relative local path</span>
<span class="nt">template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://github.com/shalb/cdev-k8s</span> <span class="c1"># https Git url</span>
<span class="nt">template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://github.com/shalb/cdev-k8s//some/dir/</span> <span class="c1"># subdirectory</span>
<span class="nt">template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://github.com/shalb/cdev-k8s//some/dir/?ref=branch-name</span> <span class="c1"># branch</span>
<span class="nt">template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://github.com/shalb/cdev-k8s?ref=v1.1.1</span> <span class="c1"># tag</span>
<span class="nt">template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">git@github.com:shalb/cdev-k8s.git</span> <span class="c1"># ssh Git url</span>
<span class="nt">template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">git@github.com:shalb/cdev-k8s.git//some/dir/</span> <span class="c1"># subdirectory</span>
<span class="nt">template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">git@github.com:shalb/cdev-k8s.git//some/dir/?ref=branch-name</span> <span class="c1"># branch</span>
<span class="nt">template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">git@github.com:shalb/cdev-k8s.git?ref=v1.1.1</span> <span class="c1"># tag</span>
</code></pre></div>
<h2 id="backends">Backends<a class="headerlink" href="#backends" title="Permanent link"> ¶</a></h2>
<p>File: searching in <code>./*.yaml</code>. <em>Required at least one</em>.
An object that describes a backend storage for Terraform and cdev states.
In the backends' configuration you can use any options of appropriate Terraform backend. They will be converted as is.
Currently 4 types of backends are supported:</p>
<ul>
<li><code>s3</code> AWS S3 backend:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">aws-backend</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="nt">provider</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">bucket</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cdev-states</span>
  <span class="nt">region</span><span class="p">:</span> <span class="p p-Indicator">{{</span> <span class="nv">.project.variables.region</span> <span class="p p-Indicator">}}</span>
</code></pre></div>
<ul>
<li><code>do</code> DigitalOcean spaces backend:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">do-backend</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="nt">provider</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">do</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">bucket</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cdev-states</span>
  <span class="nt">region</span><span class="p">:</span> <span class="p p-Indicator">{{</span> <span class="nv">.project.variables.region</span> <span class="p p-Indicator">}}</span>
  <span class="nt">access_key</span><span class="p">:</span> <span class="p p-Indicator">{{</span> <span class="nv">env &quot;SPACES_ACCESS_KEY_ID&quot;</span> <span class="p p-Indicator">}}</span>
  <span class="nt">secret_key</span><span class="p">:</span> <span class="p p-Indicator">{{</span> <span class="nv">env &quot;SPACES_SECRET_ACCESS_KEY&quot;</span> <span class="p p-Indicator">}}</span>
</code></pre></div>
<ul>
<li><code>azurerm</code> Microsoft azurerm:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gcs-b</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="nt">provider</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">azurerm</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">resource_group_name</span><span class="p">:</span> <span class="s">&quot;StorageAccount-ResourceGroup&quot;</span>
  <span class="nt">storage_account_name</span><span class="p">:</span> <span class="s">&quot;example&quot;</span>
  <span class="nt">container_name</span><span class="p">:</span> <span class="s">&quot;cdev-states&quot;</span>
</code></pre></div>
<ul>
<li><code>gcs</code> Google Cloud backend:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">do-backend</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="nt">provider</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gcs</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">bucket</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cdev-states</span>
  <span class="nt">prefix</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pref</span>
</code></pre></div>
<h2 id="secrets">Secrets<a class="headerlink" href="#secrets" title="Permanent link"> ¶</a></h2>
<p>There are two ways to use secrets:</p>
<h3 id="sops-secrets">SOPS secrets<a class="headerlink" href="#sops-secrets" title="Permanent link"> ¶</a></h3>
<p>For <strong>creating</strong> and <strong>editing</strong> SOPS secrets, cdev uses SOPS binary. But the SOPS binary is <strong>not required</strong> for decrypting and using SOPS secrets. As none of cdev reconcilation processes (build, plan, apply) requires SOPS to be performed, you don't have to install it for pipelines.</p>
<p>See <a href="https://github.com/mozilla/sops#download">SOPS installation instructions</a> in official repo.</p>
<p>Secrets are encoded/decoded with <a href="https://github.com/mozilla/sops">SOPS</a> utility that supports AWS KMS, GCP KMS, Azure Key Vault and PGP keys. How to use:</p>
<ol>
<li>
<p>Use console client cdev to create a new secret from scratch:</p>
<div class="highlight"><pre><span></span><code>cdev secret create
</code></pre></div>
</li>
<li>
<p>Use interactive menu to create a secret.</p>
</li>
<li>
<p>Edit the secret and set secret data in <code>encrypted_data:</code> section.</p>
</li>
<li>
<p>Use references to the secret's data in infrastructure template (you can find the examples in the generated secret file).</p>
</li>
</ol>
<h3 id="amazon-secret-manager">Amazon secret manager<a class="headerlink" href="#amazon-secret-manager" title="Permanent link"> ¶</a></h3>
<p>cdev client can use AWS SSM as a secret storage. How to use:</p>
<ol>
<li>
<p>Create a new secret in AWS secret manager using AWS CLI or web console. Both raw and JSON data formats are supported.</p>
</li>
<li>
<p>Use the console client cdev to create a new secret from scratch:</p>
<div class="highlight"><pre><span></span><code>cdev secret create
</code></pre></div>
</li>
<li>
<p>Answer the questions. For <code>Name of secret in AWS Secrets manager</code> enter the name of the AWS secret created above.</p>
</li>
<li>
<p>Use references to the secret's data in infrastructure template (you can find the examples in the generated secret file).</p>
</li>
</ol>
<p>To list and edit any secret, use the commands:</p>
<div class="highlight"><pre><span></span><code>cdev secret ls
</code></pre></div>
<p>and</p>
<div class="highlight"><pre><span></span><code>cdev secret edit secret_name
</code></pre></div>
<h2 id="templates">Templates<a class="headerlink" href="#templates" title="Permanent link"> ¶</a></h2>
<p>Currently there are 3 types of templates available:</p>
<ul>
<li><a href="https://github.com/shalb/cdev-aws-k3s">aws-k3s</a></li>
<li><a href="https://github.com/shalb/cdev-aws-eks">aws-eks</a></li>
<li><a href="https://github.com/shalb/cdev-do-k8s">do-k8s</a></li>
</ul>
<p>For the detailed information on templates, please see the section <a href="https://cluster.dev/template-development/">Template Development</a>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../template-development/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Template Development
            </div>
          </div>
        </a>
      
      
        <a href="../cli-commands/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              CLI Commands
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Project is maintained by
        <a href="https://www.shalb.com/" target="_blank" rel="noopener">
          SHALB
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://join.slack.com/t/cluster-dev/shared_invite/zt-eg4q6jae-v0~zgrBLYTTXt~CjnjmprA" target="_blank" rel="noopener" title="join.slack.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/shalbcom" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://github.com/shalb/cluster.dev" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.b0710199.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.76f349be.min.js"></script>
      
    
  </body>
</html>